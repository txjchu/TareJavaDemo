<!DOCTYPE html>
<html>
	<head>
		<meta charset="utf-8">
		<title>计算器_事务控制_鼠标</title>
		<style type="text/css">
			/*类选择器*/
			.panel {
				border:4px solid #ddd;
				width: 192px;
				margin:100px auto;
				border-radius:6px;
			}
			.panel p, .panel input{
				font-family:"微软雅黑";
				font-size:20px;
				margin:4px;
				float:left;
				border-radius:4px;
			}
			.panel p{
				width:122px;
				height:26px;
				border:1px solid #ddd;
				padding:6px;
				overflow:hidden;
			}
			.panel input{
				width:40px;
				height:40px;
				border:1px solid #ddd;
			}
		</style>
		<script type="text/javascript">
			//声明参数e接收事件对象		cal:计算机辅助
			function cal(e){
				//1.获取事件源(button,p,div)
				var obj = e.srcElement || e.target;
				//2.只处理button的事件
				if(obj.nodeName != "INPUT"){
					return;
				}
				//3.判断button的value,做不同的处理
				var val = obj.value;//字符串类型
				var p = document.getElementById("screen");
					//若是C，则清屏归零，或者屏幕上有Error.没有消除，也归零
				if(val == "C" || p.innerHTML == "Error."){
					p.innerHTML = "";
				}else if(val == "="){
					//计算
					try{
						var r =eval(p.innerHTML);//获取段落标签p中的内容，并计算？
						p.innerHTML = r;//将计算后的结果返回给p
					} catch(e){
						//错误时给予提示
						p.innerHTML = "Error.";
					}
				} else {
					//累加		若不是计算，则将按到的数字累加到P中
					p.innerHTML += val;
				}
			}
		</script>
	</head>
	<body>
		<!-- 将单击事件注册在父元素上，通过event获取事件源对象，就可以判断出点击的是哪个按钮，就可以处理该按钮的业务逻辑，
				这样做的好处是可以减少事件注册的次数。 -->
		<div class="panel" onclick="cal(event);">
			<div>	<!-- 屏幕 -->
				<p id="screen"></p>
				<input type="button" value="C" />
				<div style="clear: both"></div><!-- 清除浮动带来的影响 -->
			</div>
			<div>
				<input type="button" value="7">
				<input type="button" value="8">
				<input type="button" value="9">
				<input type="button" value="/">
				
				<input type="button" value="4">
				<input type="button" value="5">
				<input type="button" value="6">
				<input type="button" value="*">
				
				<input type="button" value="1">
				<input type="button" value="2">
				<input type="button" value="3">
				<input type="button" value="-">
				
				<input type="button" value="0">
				<input type="button" value=".">
				<input type="button" value="=">
				<input type="button" value="+">
				
				<div style="clear:both"></div>
			</div>
		</div>
	</body>
</html>

























