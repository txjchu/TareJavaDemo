<!doctype html>
<html>
	<head>
		<meta charset="utf-8"/>
		<title>jQ版计算器</title>
		<style type="text/css">
			.panel {
		        border: 4px solid #ddd;
		        width: 192px;
		        margin: 100px auto;
		        /*-------------边框边角变成圆弧角*/
		        border-radius: 6px;
		    }
		    .panel p, .panel input {
		        font-family: "微软雅黑";
		        font-size: 20px;
		        margin: 4px;
		        float: left;
		        border-radius: 4px;
		    }
		    .panel p {
		        width: 122px;
		        height: 26px;
		        border: 1px solid #ddd;
		        padding: 6px;
		        overflow: hidden;
		    }
		    .panel input {
		        width: 40px;
		        height: 40px;
		        border:1px solid #ddd;
		    }
		</style>	
		<script type="text/javascript" src = "..\js\jquery-1.11.1.js"></script>	
		<script type="text/javascript">
			//页面加载后
			$(function(){
				//给最外层div绑定单击事件
				$(".panel").click(function(e){
					if(e.target.nodeName != "INPUT"){//获取事件源对象e.target返回的是触发事件的DOM对象。
						return;//判断事件源是否是表单元素。
					}
					//获取按钮并判断
					var value = e.target.value;
					//console.log(value);
					var str = $("#screen").html();
					//console.log(str.substring('0','4'));
					var s2 = "var n = 5; console.log(n);";
					//console.log(s2);
					console.log(eval(s2));//先执行s2中打桩，再进行计算，然后再最后打桩
					if(value=="C" || str.substring('0','5')=="Error"){
						//清屏
						//$("#screen").empty();//清除标签中的文本。
						$("#screen").html("");
					}else if(value=="="){//若用户点击了=号，则进行计算
						//计算
						var exp = $("#screen").html();
						console.log(exp);
						try {
								var r = eval(exp);
								$("#screen").html(r);//计算结果并输出
						} catch(e){
							$("#screen").html("Error");//若计算出的结果不正确，则抛出异常时，在文本框中显示ERROR
						}						
					} else {//若用户点击的不是=号，则进行字符串追加
						var s = $("#screen").html()+value;
						$("#screen").html(s);
					}					
				});
			});
		</script>
	</head>
	<body>
		<!-- 利用event获取事件源，减少事件注册的次数。 -->
	  	<!-- 将单击事件注册在父元素上，通过event获取事件源对象，就可以判断出点击的是哪个按钮，就可以处理该按钮的业务逻辑。 -->
	    <div class="panel" >
	      <div>
	        <p id="screen"></p>
	        <input type="button" value="C">
	        <div style="clear:both"></div>
	      </div>
	      <div>
	        <input type="button" value="7">
	        <input type="button" value="8">
	        <input type="button" value="9">
	        <input type="button" value="/">
	        
	        <input type="button" value="4">
	        <input type="button" value="5">
	        <input type="button" value="6">
	        <input type="button" value="*">
	        
	        <input type="button" value="1">
	        <input type="button" value="2">
	        <input type="button" value="3">
	        <input type="button" value="-">
	        
	        <input type="button" value="0">
	        <input type="button" value=".">
	        <input type="button" value="=">
	        <input type="button" value="+">
	        
	       	<div style="clear:both"></div>
	      </div>
    	</div>   	
	</body>
</html>





















